
# Запрет копирования/перемещения уроков в корень раздела

## Проблема

Сейчас при копировании/перемещении урока можно выбрать "В корень раздела (без родителя)" — `targetModuleId = null`. Edge function передаёт `null` как `module_id`, но уроки обязаны принадлежать модулю. Результат: урок остаётся на месте или создаётся с некорректным `module_id`.

## Решение

В `CopyMoveDialog.tsx` для `sourceType === "lesson"`:

1. **Заблокировать кнопку подтверждения**, если `targetModuleId === null` — добавить условие `disabled` на кнопку "Копировать"/"Переместить".
2. **Показать предупреждение** под `ModuleTreeSelector`: текст "Урок должен находиться в модуле. Выберите целевой модуль." (жёлтый/оранжевый, `text-amber-600`).
3. **Изменить подсказку** над `ModuleTreeSelector`: вместо "Выберите модуль-контейнер или оставьте «Корень раздела»" показывать "Выберите модуль, в который будет скопирован/перемещён урок".

## Техническая реализация

### Файл: `src/components/admin/trainings/CopyMoveDialog.tsx`

**Изменение 1** — Вычисляемая переменная:
```typescript
const isLessonWithoutModule = sourceType === "lesson" && !targetModuleId;
```

**Изменение 2** — Кнопка подтверждения (строка 139):
```typescript
<Button onClick={handleSubmit} disabled={loading || isLessonWithoutModule}>
```

**Изменение 3** — Подсказка над ModuleTreeSelector (строки 121-124):
Для `sourceType === "lesson"` текст: "Выберите модуль, куда будет скопирован урок" (без упоминания "корня раздела").

**Изменение 4** — Предупреждение под ModuleTreeSelector:
Если `isLessonWithoutModule` — показать:
```
<p className="text-sm text-amber-600">Урок должен находиться в модуле. Выберите целевой модуль.</p>
```

## Что НЕ трогаем

- Edge function (валидация на бэке — дополнительная защита, но не обязательна)
- ModuleTreeSelector (опция "корень" остаётся для модулей)
- Остальные компоненты
