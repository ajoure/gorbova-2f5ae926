
# –í–´–ü–û–õ–ù–ï–ù–û: –°—Ç—Ä–∞–Ω–∏—Ü–∞ System Health + –£–ª—É—á—à–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (2026-02-03)

---

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ 1. –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ /admin/system-health

**–§–∞–π–ª—ã:**
- `src/pages/admin/AdminSystemHealth.tsx` ‚Äî –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∞—à–±–æ—Ä–¥–∞
- `src/components/admin/system-health/SystemHealthOverview.tsx` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
- `src/components/admin/system-health/InvariantCheckCard.tsx` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏
- `src/components/admin/system-health/HealthRunHistory.tsx` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∑–∞–ø—É—Å–∫–æ–≤
- `src/hooks/useSystemHealthRuns.ts` ‚Äî —Ö—É–∫–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö + —Å–ª–æ–≤–∞—Ä—å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –û–±–∑–æ—Ä –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º passed/failed
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–ü–ª–∞—Ç–µ–∂–∏, –î–æ—Å—Ç—É–ø—ã, Telegram, –°–∏—Å—Ç–µ–º–∞)
- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –æ—à–∏–±–æ–∫
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É" –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∑–∞–ø—É—Å–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- –°—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ú–∞—Ä—à—Ä—É—Ç:** `/admin/system-health` –¥–æ–±–∞–≤–ª–µ–Ω –≤ App.tsx

---

### ‚úÖ 2. –£–ª—É—á—à–µ–Ω —Ñ–æ—Ä–º–∞—Ç Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–§–∞–π–ª:** `supabase/functions/nightly-system-health/index.ts`

**–ë—ã–ª–æ:**
```
‚ùå –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å—É–º–º (INV-3)
   –ù–∞–π–¥–µ–Ω–æ: 1
   –ü—Ä–æ–±–ª–µ–º–∞: –°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞
   –î–µ–π—Å—Ç–≤–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–∏–¥–∫–∏ –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
```

**–°—Ç–∞–ª–æ:**
```
‚ùå –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å—É–º–º (INV-3)
   –ù–∞–π–¥–µ–Ω–æ: 1
   –ü—Ä–æ–±–ª–µ–º–∞: –°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞
   üìã –ü—Ä–∏–º–µ—Ä—ã:
   ‚Ä¢ –ü–ª–∞—Ç—ë–∂ abc12345: 59 BYN ‚Üí –ó–∞–∫–∞–∑: 79 BYN
   üîß –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–∏–¥–∫–∏ –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
   ‚Üí /admin/payments
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ sample_rows
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –§—É–Ω–∫—Ü–∏—è `formatSampleForTelegram()` —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –ø—Ä–∏–º–µ—Ä—ã –ø–æ —Ç–∏–ø—É –ø—Ä–æ–≤–µ—Ä–∫–∏

---

### ‚úÖ 3. –°–ª–æ–≤–∞—Ä—å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å URL-—à–∞–±–ª–æ–Ω–∞–º–∏

–í—Å–µ 15 –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏–º–µ—é—Ç:
- `title` ‚Äî –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- `explain` ‚Äî –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- `action` ‚Äî —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å
- `urlPath` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≥–¥–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

---

## –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (INV-1 ‚Äî INV-15)

| –ö–æ–¥ | –ù–∞–∑–≤–∞–Ω–∏–µ | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Å—ã–ª–∫–∞ |
|-----|----------|-----------|--------|
| INV-1 | –î—É–±–ª–∏–∫–∞—Ç—ã –ø–ª–∞—Ç–µ–∂–µ–π | payments | /admin/payments?duplicate=true |
| INV-2A | –ü–ª–∞—Ç–µ–∂–∏ –±–µ–∑ –∑–∞–∫–∞–∑–æ–≤ | payments | /admin/payments?filter=orphan |
| INV-2B | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–∏—Ä–æ—Ç—ã | payments | ‚Äî |
| INV-3 | –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å—É–º–º | payments | /admin/payments |
| INV-4 | –¢—Ä–∏–∞–ª-–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ | system | ‚Äî |
| INV-5 | –ù–µ—Å–∫–æ–ª—å–∫–æ —Ü–µ–Ω | system | /admin/products-v2 |
| INV-6 | –†–∞—Å—á—ë—Ç—ã —Å–ø–∏—Å–∞–Ω–∏–π | system | ‚Äî |
| INV-7 | –†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω bePaid | payments | /admin/payments?tab=statement |
| INV-8 | –ù–µ—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ | payments | /admin/payments?filter=unclassified |
| INV-9 | –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –∑–∞–∫–∞–∑–∞–º–∏ | payments | ‚Äî |
| INV-10 | –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø—ã | access | /admin/entitlements |
| INV-11 | –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ | access | /admin/subscriptions-v2 |
| INV-12 | –û—à–∏–±–æ—á–Ω—ã–µ —Ä–µ–≤–æ–∫–∏ TG | telegram | /admin/telegram-diagnostics |
| INV-13 | –¢—Ä–∏–∞–ª—ã –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ | access | /admin/deals?filter=trial |
| INV-14 | –î–≤–æ–π–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ | access | ‚Äî |
| INV-15 | –ü–ª–∞—Ç–µ–∂–∏ –±–µ–∑ –ø—Ä–æ—Ñ–∏–ª—è | payments | ‚Äî |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (TODO)

1. **–†–∞—Å—à–∏—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   - INV-16: Telegram-–±–æ—Ç—ã –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ 24—á
   - INV-17: –û—á–µ—Ä–µ–¥—å payment_reconcile > 100
   - INV-18: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º error
   - INV-19: –£—Ä–æ–∫–∏ –±–µ–∑ –±–ª–æ–∫–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
   - INV-20: Cron-–∑–∞–¥–∞—á–∏ –±–µ–∑ –∑–∞–ø—É—Å–∫–æ–≤ > 2—á

2. **–î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ–Ω—é:** –ü—É–Ω–∫—Ç "–ê—É–¥–∏—Ç —Å–∏—Å—Ç–µ–º—ã" —É–∂–µ –≤–µ–¥—ë—Ç –Ω–∞ /admin/system/audit, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å /admin/system-health –æ—Ç–¥–µ–ª—å–Ω–æ –∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å.
