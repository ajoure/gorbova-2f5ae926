
# План: Клуб открывается внутри ЛК (как курс и бизнес-тренинг)

## Суть проблемы

Сейчас кнопка "На сайт" у клуба делает `window.location.assign("https://club.gorbova.by/")` — это **выбрасывает** авторизованного пользователя из личного кабинета на внешний сайт.

При этом "Ценный бухгалтер" и "Бухгалтерия как бизнес" открываются **внутри** ЛК через SPA-навигацию (`navigate("/course-accountant")`, `navigate("/business-training")`).

**Результат**: авторизованные клиенты не могут увидеть тарифы клуба и купить подписку, оставаясь в ЛК.

## Что нужно сделать

Сделать поведение клуба **таким же**, как у курса и бизнес-тренинга:
- Авторизованный пользователь → SPA-навигация на `/club` → видит лендинг клуба **внутри** ЛК
- Гость → переход на внешний сайт `https://club.gorbova.by/`

## Правки

### 1. Добавить маршрут `/club` в App.tsx

Добавить публичный маршрут (как `/business-training`):

```
/club → <Landing /> (страница лендинга клуба)
```

### 2. Изменить логику кнопки "На сайт" для клуба

**Файл: `src/pages/Learning.tsx`**

```tsx
// БЫЛО:
const handleGoToSite = () => {
  if (product.isClub) {
    window.location.assign("https://club.gorbova.by/");
    return;
  }
  // ...
};

// СТАНЕТ:
const handleGoToSite = () => {
  if (product.isClub) {
    // Авторизован → SPA внутри ЛК
    // Гость → внешний сайт
    if (user) {
      navigate("/club");
    } else {
      window.location.assign("https://club.gorbova.by/");
    }
    return;
  }
  // ...
};
```

**Файл: `src/pages/Products.tsx`**

Аналогичная логика: добавить проверку `user` из `useAuth()`.

### 3. Обновить purchaseLink клуба (опционально)

В массиве `products` изменить:

```tsx
// БЫЛО:
purchaseLink: "https://club.gorbova.by",

// СТАНЕТ:
purchaseLink: "/club",
```

## Что остаётся без изменений

- `Landing.tsx` — уже содержит лендинг клуба с тарифами
- Guest guard в `ProtectedRoute.tsx` — работает для `/products`
- `DomainRouter` — `/` отдаёт `Landing` для всех

## Ожидаемое поведение

| Сценарий | Действие | Результат |
|----------|----------|-----------|
| Авторизован, в ЛК | Клик "На сайт" у клуба | SPA → `/club` → лендинг с тарифами внутри ЛК |
| Гость | Клик "На сайт" у клуба | Внешний переход на `https://club.gorbova.by/` |
| Авторизован, внешний сайт | Открыл `club.gorbova.by` | Видит лендинг, кнопка "Открыть кабинет" |

## Файлы для изменения

1. `src/App.tsx` — добавить маршрут `/club`
2. `src/pages/Learning.tsx` — изменить `handleGoToSite` для клуба
3. `src/pages/Products.tsx` — изменить `handleClick` для клуба

## DoD (обязательно)

1. Авторизованный пользователь:
   - "Обучение → Все продукты" → "На сайт" у клуба → открывается `/club` (лендинг внутри ЛК)
   - Видит тарифы, может купить
2. Гость:
   - "На сайт" у клуба → переход на `https://club.gorbova.by/`
3. Скриншоты:
   - URL `/club` в адресной строке
   - Лендинг с тарифами виден
4. Diff-summary: список файлов
