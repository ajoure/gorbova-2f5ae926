

# Исправление: снять блокировку админ-панели на iOS в preview

## Проблема

Файл `src/hooks/useIOSAdminGuard.ts` содержит guard, который **синхронно блокирует** все маршруты `/admin/*` на iOS Safari внутри iframe (preview Lovable). При попытке перейти в админ-панель пользователь мгновенно перенаправляется на `/dashboard`.

На опубликованном сайте iframe отсутствует, поэтому guard не срабатывает и всё работает.

## Решение

Удалить `IOSAdminGuard` из дерева компонентов и убрать его импорт.

### Задача 1. Убрать IOSAdminGuard из App.tsx

**Файл:** `src/App.tsx`

- Удалить импорт `IOSAdminGuard` (строка 14)
- Удалить обёртку `<IOSAdminGuard>...</IOSAdminGuard>` вокруг `<AuthProvider>` (строки 143, 285)
- Содержимое (AuthProvider и далее) оставить без изменений

### Задача 2. Оставить файл useIOSAdminGuard.ts

Файл не удалять (add-only подход, минимальный diff). Он просто перестанет использоваться.

## Что НЕ меняется

- Логика авторизации в AdminLayout (проверка `hasAdminAccess()`) — остаётся
- RBAC, RLS, роли — без изменений
- Другие iOS-механизмы (useLastRoute, iosPreviewHardStops для Excel) — без изменений
- Никаких SQL/миграций/edge functions

## Файлы

| Файл | Действие |
|---|---|
| `src/App.tsx` | Убрать импорт и обёртку IOSAdminGuard |

## DoD

1. Открыть preview на iOS Safari, перейти по ссылке "Перейти в админ-панель" -- админка загружается
2. Глобальный поиск: `IOSAdminGuard` используется только в объявлении файла, не в App.tsx
